name: Update GitHub Stats

on:
  schedule:
    - cron: "0 */12 * * *"  # runs every 12 hours
  workflow_dispatch:        # allows manual trigger

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      
      - name: Verify GitHub Stats URLs
        run: |
          echo "Verifying GitHub Stats URLs are present in README.md..."
          
          # Check if README exists
          if [ ! -f README.md ]; then
            echo "❌ ERROR: README.md not found"
            exit 1
          fi
          
          # Check for required stat URLs
          urls=(
            "streak-stats.demolab.com"
            "github-readme-stats.vercel.app"
            "leetcard.jacoblin.cool"
          )
          
          all_found=true
          for url in "${urls[@]}"; do
            if grep -q "$url" README.md; then
              echo "✓ Found: $url"
            else
              echo "✗ Missing: $url"
              all_found=false
            fi
          done
          
          if [ "$all_found" = true ]; then
            echo "✓ All GitHub Stats URLs are present in README.md"
            echo "Stats are dynamically generated by external services on view"
          else
            echo "❌ Some stats URLs are missing from README.md"
            exit 1
          fi
